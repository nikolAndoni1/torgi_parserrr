Парсер лотов с torgi.org

Скрипт parse_trades.py парсит страницу торгов
https://torgi.org/index.php?class=Auction&action=List&mod=Open&AuctionType=All
.

Он:

собирает список лотов (код, название, начальная цена, ссылка на страницу лота);

переводит цену из строки в число;

фильтрует лоты по минимальной и максимальной цене;

выводит их от самого дорогого к самому дешёвому;

сохраняет результат в lots.json.

Откуда берутся данные

Есть два варианта:

Скачать HTML с сайта (по умолчанию).
Если запустить скрипт без аргумента --file, он сам делает запрос на torgi.org и парсит полученную страницу.

Работа с сохранённым HTML-файлом.
Можно заранее сохранить страницу через браузер (Ctrl+S / Cmd+S) и передать путь к файлу:

python parse_trades.py --file trades.html

Установка

Рекомендуется использовать виртуальное окружение (venv), но это не обязательно.

Установка зависимостей:

pip install -r requirements.txt


В проекте используются библиотеки:

requests — скачивание HTML со страницы торгов;

beautifulsoup4 + lxml — разбор HTML и поиск таблицы с лотами.

Запуск

Базовый формат:

python parse_trades.py [--file ПУТЬ_К_HTML] [--min-price МИН] [--max-price МАКС] [--output ИМЯ_JSON]


Примеры:

# 1. Скачиваем HTML с сайта, диапазон цен введём с клавиатуры
python parse_trades.py

# 2. Парсим сохранённый файл и задаём диапазон сразу в аргументах
python parse_trades.py --file trades.html --min-price 500000 --max-price 3000000

# 3. Только минимальная граница, результат запишется в my_lots.json
python parse_trades.py --min-price 1000000 --output my_lots.json


Если --min-price и --max-price не указаны, программа сама спросит минимальную и максимальную цену
(можно оставить пусто — тогда ограничения не будет).

Формат вывода

В консоль каждая строка выглядит так:

12601000 руб. | Квартира, расположенная по адресу: ... | https://torgi.org/...


Файл lots.json содержит список объектов:

{
  "code": "123456",
  "title": "Квартира, расположенная по адресу: ...",
  "price": 12601000.0,
  "url": "https://torgi.org/..."
}

Структура репозитория

parse_trades.py — основной файл парсера.

requirements.txt — используемые библиотеки.

README.md — описание проекта и инструкция по запуску.

.gitignore — исключает виртуальное окружение и временные файлы.
